{"version":3,"file":"js/292.2f1340b7.js","mappings":"+GAAA,MAAMA,EAAa,CACjBC,kBAAmB,cACnBC,YAAa,8BACbC,YAAa,kBAGf,QAAgBC,EAAMC,KAChBL,EAAWK,GACbD,EAAK,CACHE,KAAM,QACNC,MAAO,KACPC,KAAMR,EAAWK,KAGnBD,EAAK,CACHE,KAAM,QACNC,MAAO,KACPC,KAAM,iC,s6BC6CZ,MAAMC,GAAQC,EAAAA,EAAAA,IAAO,SACfN,GAAOM,EAAAA,EAAAA,IAAO,SACdC,GAASC,EAAAA,EAAAA,MACTC,GAAYC,EAAAA,EAAAA,KAAI,GAEhBC,GAAOD,EAAAA,EAAAA,IAAI,CACfE,MAAO,GACPC,SAAU,KAGNC,EAASC,UACb,IACEN,EAAUO,OAAQ,EAClB,MAAM,KAAEC,SAAeZ,EAAMa,KAAK,SAAUP,EAAKK,OAEjDG,SAASC,OAAU,iBAAgBH,EAAKI,8BACxCF,SAASC,OAAU,oBAAmBH,EAAKN,KAAKW,2BAChDH,SAASC,OAAU,cAAaH,EAAKN,KAAKY,qBAC1ClB,EAAMmB,SAASC,QAAQC,OAAOC,cAAiB,UAASV,EAAKI,cAE7DrB,EAAK4B,KAAK,CACR1B,KAAM,UACNC,MAAO,KACPC,KAAM,UAERyB,YAAW,KACTtB,EAAOuB,GAAG,KACT,MACH,MAAOC,GAMP,MAL8B,MAA1BA,EAAMC,SAASC,QACjBC,EAAAA,EAAAA,GAAalC,EAAK4B,KAAM,gBAExBM,EAAAA,EAAAA,GAAalC,EAAK4B,MAEd,IAAIO,MAAO,oBAAmBJ,EAAMK,WAvB5C,QAyBE3B,EAAUO,OAAQ,I,OAItBqB,EAAAA,EAAAA,KAAU,KACR,MAAMC,EAAcnB,SAASC,OAAOmB,QAAQ,mDAAoD,MAC5FD,GACF/B,EAAOiC,KAAK,sB,0mCCnGhB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://rn-wealth/./src/utils/errorHandler.js","webpack://rn-wealth/./src/views/BeforeLogin/LogIn.vue","webpack://rn-wealth/./src/views/BeforeLogin/LogIn.vue?07f7"],"sourcesContent":["const errorCodes = {\n  updateOrderFailed: '更新失敗,請稍後再試。',\n  signupError: '請重新註冊，帳號已有人使用或密碼太短(需4位數以上)。',\n  signInError: '請重新登入，帳號或密碼錯誤。',\n};\n\nexport default (swal, errorCode) => {\n  if (errorCodes[errorCode]) {\n    swal({\n      icon: 'error',\n      title: '失敗',\n      text: errorCodes[errorCode],\n    });\n  } else {\n    swal({\n      icon: 'error',\n      title: '失敗',\n      text: 'sorry，目前服務不可用，請稍後再試或聯絡管理員。',\n    });\n  }\n};\n","<template>\n<VLoading :active=\"isLoading\"></VLoading>\n<div class=\"container-fluid\">\n    <div class=\"row mt-5 mt-md-0\">\n        <div class=\"col d-none d-md-block\">\n            <img src=\"https://images.unsplash.com/photo-1579621970343-21c491b3f363?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80\" class=\"signInImg\" alt=\"moneyBox\">\n        </div>\n        <div class=\"col\">\n            <h2 class=\"text-center my-5\">RNWealth 會員登入</h2>\n            <v-form v-slot=\"{ errors }\" class=\"signInForm mb-5\" @submit=\"signIn\">\n                <div class=\"form-floating mb-3\">\n                    <v-field type=\"email\" class=\"form-control\"\n                    id=\"signInAccount\" name=\"Email\"\n                    rules=\"email|required\" :class=\"{ 'is-invalid': errors['Email'] }\"\n                    v-model=\"user.email\"></v-field>\n                    <!--  eslint-disable-next-line vuejs-accessibility/label-has-for -->\n                    <label for=\"signInAccount\">EMail 帳號</label>\n                    <error-message class=\"invalid-feedback\" name=\"Email\">\n                    </error-message>\n                </div>\n                <div class=\"form-floating mb-4\">\n                    <v-field type=\"password\" class=\"form-control\"\n                    id=\"signInPassword\" name=\"密碼\"\n                    rules=\"required\" :class=\"{ 'is-invalid': errors['密碼'] }\"\n                    v-model=\"user.password\"></v-field>\n                    <!--  eslint-disable-next-line vuejs-accessibility/label-has-for -->\n                    <label for=\"signInPassword\">密碼</label>\n                    <error-message class=\"invalid-feedback\" name=\"密碼\">\n                    </error-message>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary mb-2 signInBtn\">登入</button>\n                <router-link class=\"btn btn-outline-light signInBtn\"\n                to=\"/signup\">註冊</router-link>\n            </v-form>\n        </div>\n    </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n    .signInImg {\n        width: 100%;\n        height: 100vh;\n        object-fit: cover;\n        object-position: center bottom;\n    }\n    .signInForm {\n        width: 80%;\n        margin: 0 auto;\n        border: 1px solid #adb5bd;\n        padding: 5%;\n        .signInBtn {\n            width: 100%;\n        }\n    }\n</style>\n\n<script setup>\nimport errorHandler from '@/utils/errorHandler';\nimport { ref, inject, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\n\nconst axios = inject('axios');\nconst swal = inject('$swal');\nconst router = useRouter();\nconst isLoading = ref(false);\n\nconst user = ref({\n  email: '',\n  password: '',\n});\n\nconst signIn = async () => {\n  try {\n    isLoading.value = true;\n    const { data } = await axios.post('signin', user.value);\n\n    document.cookie = `RNWealthToken=${data.accessToken}; max-age=86400;`;\n    document.cookie = `RNWealthNickname=${data.user.nickname}; max-age=86400;`;\n    document.cookie = `RNWealthId=${data.user.id}; max-age=86400;`;\n    axios.defaults.headers.common.Authorization = `Bearer ${data.accessToken}`;\n\n    swal.fire({\n      icon: 'success',\n      title: '成功',\n      text: '登入成功。',\n    });\n    setTimeout(() => {\n      router.go(0);\n    }, 1500);\n  } catch (error) {\n    if (error.response.status === 400) {\n      errorHandler(swal.fire, 'signInError');\n    } else {\n      errorHandler(swal.fire);\n    }\n    throw new Error(`[signIn] error : ${error.message}`);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\nonMounted(() => {\n  const getIdCookie = document.cookie.replace(/(?:(?:^|.*;\\s*)RNWealthId\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n  if (getIdCookie) {\n    router.push('/dashboard/book');\n  }\n});\n</script>\n","import script from \"./LogIn.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LogIn.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LogIn.vue?vue&type=style&index=0&id=685b695c&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Front End\\\\Vue\\\\RNWealth\\\\rn-wealth\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-685b695c\"]])\n\nexport default __exports__"],"names":["errorCodes","updateOrderFailed","signupError","signInError","swal","errorCode","icon","title","text","axios","inject","router","useRouter","isLoading","ref","user","email","password","signIn","async","value","data","post","document","cookie","accessToken","nickname","id","defaults","headers","common","Authorization","fire","setTimeout","go","error","response","status","errorHandler","Error","message","onMounted","getIdCookie","replace","push","__exports__"],"sourceRoot":""}